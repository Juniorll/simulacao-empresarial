<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmpresaTec - SimulaÃ§Ã£o Empresarial</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- BotÃ£o de Logout Sempre VisÃ­vel -->
    <div id="logoutContainer" class="logout-container hidden">
        <button type="button" class="btn btn--logout" id="logoutBtn">
            <svg class="logout-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16,17 21,12 16,7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Sair
        </button>
        <div class="user-info">
            <span class="user-email" id="userEmail">UsuÃ¡rio</span>
        </div>
    </div>

    <!-- Barra de Progresso -->
    <div class="progress-container hidden" id="progressContainer">
        <div class="progress-header">
            <h4>EmpresaTec - Ato 1</h4>
            <div class="progress-text" id="progressText">Etapa 1 de 8</div>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
    </div>

    <!-- Login Screen -->
    <div class="screen active" id="loginScreen">
        <div class="container">
            <div class="login-card">
                <div class="logo">
                    <h1>ğŸ¢ EmpresaTec</h1>
                    <div class="subtitle">SimulaÃ§Ã£o Empresarial - Ato 1</div>
                </div>
                <p class="welcome-text">Bem-vindo Ã  simulaÃ§Ã£o empresarial mais realista! Entre com suas credenciais para comeÃ§ar sua jornada empreendedora.</p>
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label" for="email">Email</label>
                        <input type="email" id="email" class="form-control" required placeholder="seu@email.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="password">Senha</label>
                        <input type="password" id="password" class="form-control" required placeholder="Digite sua senha">
                    </div>
                    <button type="submit" class="btn btn--primary btn--full-width">
                        <span>Entrar no EmpresaTec</span>
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </form>
                <div class="teacher-access">
                    <button type="button" class="btn btn--outline btn--sm" id="teacherBtn">ğŸ‘©â€ğŸ« Acesso Professor</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SeleÃ§Ã£o de Equipe -->
    <div class="screen" id="teamScreen">
        <div class="container">
            <div class="screen-header">
                <h2>ğŸ“‹ FormaÃ§Ã£o de Equipe</h2>
                <p class="screen-description">Forme sua equipe empresarial ou junte-se a uma equipe existente para comeÃ§ar o desafio!</p>
            </div>

            <div class="team-options">
                <div class="option-card" id="createTeamCard">
                    <div class="option-icon">ğŸ‘‘</div>
                    <h3>Criar Nova Equipe</h3>
                    <p>Seja o lÃ­der e forme uma nova equipe empresarial</p>
                    <div class="form-group">
                        <input type="text" id="teamName" class="form-control" placeholder="Nome da sua empresa" maxlength="50">
                    </div>
                    <button class="btn btn--primary" id="createTeamBtn">ğŸš€ Criar Equipe</button>
                </div>

                <div class="option-card" id="joinTeamCard">
                    <div class="option-icon">ğŸ‘¥</div>
                    <h3>Entrar em Equipe</h3>
                    <p>Use o cÃ³digo fornecido pelo lÃ­der da equipe</p>
                    <div class="form-group">
                        <input type="text" id="teamCode" class="form-control" placeholder="CÃ³digo da equipe" maxlength="10">
                    </div>
                    <button class="btn btn--secondary" id="joinTeamBtn">ğŸ¤ Entrar na Equipe</button>
                </div>
            </div>

            <!-- Lista de Membros da Equipe -->
            <div class="team-status hidden" id="teamStatus">
                <div class="team-info">
                    <h3 id="teamNameDisplay">Minha Equipe</h3>
                    <div class="team-code-display">
                        <span>CÃ³digo da Equipe: </span>
                        <code id="teamCodeDisplay">ABC123</code>
                        <button class="btn btn--outline btn--xs" id="copyCodeBtn">ğŸ“‹ Copiar</button>
                    </div>
                </div>

                <div class="members-section">
                    <h4>ğŸ‘¥ Membros da Equipe</h4>
                    <div class="members-list" id="membersList">
                        <!-- Membros serÃ£o adicionados dinamicamente -->
                    </div>
                    <div class="members-waiting" id="membersWaiting">
                        <p>â³ Aguardando mais membros se juntarem...</p>
                        <div class="recommended-size">Recomendado: 3-5 membros</div>
                    </div>
                </div>

                <div class="leader-actions hidden" id="leaderActions">
                    <button class="btn btn--success btn--large" id="startGameBtn">
                        âœ¨ Iniciar SimulaÃ§Ã£o
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- QuestionÃ¡rio de Perfil -->
    <div class="screen" id="profileScreen">
        <div class="container">
            <div class="screen-header">
                <h2>ğŸ§  Descobrindo Seu Perfil Profissional</h2>
                <p class="screen-description">Responda Ã s perguntas abaixo para descobrir qual Ã© o seu perfil profissional no mundo empresarial.</p>
                <div class="profile-progress">
                    <span id="questionProgress">Pergunta 1 de 10</span>
                    <div class="mini-progress">
                        <div class="mini-progress-fill" id="miniProgressFill"></div>
                    </div>
                </div>
            </div>

            <div class="questionnaire" id="questionnaire">
                <!-- Perguntas serÃ£o carregadas dinamicamente -->
            </div>

            <div class="question-navigation">
                <button class="btn btn--outline" id="prevQuestionBtn" disabled>â¬… Anterior</button>
                <button class="btn btn--primary" id="nextQuestionBtn" disabled>PrÃ³xima â¡</button>
                <button class="btn btn--success hidden" id="finishQuestionnaireBtn">âœ… Finalizar</button>
            </div>
        </div>
    </div>

    <!-- Resultados dos Perfis -->
    <div class="screen" id="profileResultsScreen">
        <div class="container">
            <div class="screen-header">
                <h2>ğŸ¯ Perfis da Equipe</h2>
                <p class="screen-description">ConheÃ§a os perfis profissionais de todos os membros da sua equipe!</p>
            </div>

            <div class="profile-results">
                <div class="my-profile" id="myProfile">
                    <!-- Perfil do usuÃ¡rio serÃ¡ mostrado aqui -->
                </div>

                <div class="team-profiles" id="teamProfiles">
                    <h3>ğŸ‘¥ Perfis dos Colegas</h3>
                    <div class="profiles-grid" id="profilesGrid">
                        <!-- Perfis dos membros serÃ£o mostrados aqui -->
                    </div>
                </div>

                <div class="waiting-profiles" id="waitingProfiles">
                    <p>â³ Aguardando outros membros completarem o questionÃ¡rio...</p>
                    <div class="loading-animation">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            </div>

            <div class="leader-actions hidden" id="profilesNextBtn">
                <button class="btn btn--success btn--large" id="continueToSegmentBtn">
                    ğŸš€ Escolher Segmento da Empresa
                </button>
            </div>
        </div>
    </div>

    <!-- Escolha do Segmento -->
    <div class="screen" id="segmentScreen">
        <div class="container">
            <div class="screen-header">
                <h2>ğŸ­ Escolha do Segmento Empresarial</h2>
                <p class="screen-description">Sua equipe deve votar e decidir em qual segmento tecnolÃ³gico irÃ£o empreender!</p>
            </div>

            <div class="segments-grid" id="segmentsGrid">
                <!-- Segmentos serÃ£o carregados aqui -->
            </div>

            <div class="voting-section" id="votingSection">
                <div class="voting-status">
                    <h4>ğŸ—³ï¸ Status da VotaÃ§Ã£o</h4>
                    <div class="votes-count" id="votesCount">Votos recebidos: 0 de 0</div>
                </div>

                <button class="btn btn--primary btn--large hidden" id="submitVoteBtn">
                    ğŸ“Š Confirmar Voto
                </button>
            </div>

            <div class="vote-results hidden" id="voteResults">
                <h3>ğŸ“ˆ Resultado da VotaÃ§Ã£o</h3>
                <div class="results-display" id="resultsDisplay">
                    <!-- Resultados serÃ£o mostrados aqui -->
                </div>
                <div class="segment-selected" id="segmentSelected">
                    <!-- Segmento escolhido serÃ¡ mostrado aqui -->
                </div>
            </div>

            <div class="leader-actions hidden" id="segmentNextBtn">
                <button class="btn btn--success btn--large" id="continueToElectionBtn">
                    ğŸ‘‘ Eleger CEO
                </button>
            </div>
        </div>
    </div>

    <!-- EleiÃ§Ã£o do CEO -->
    <div class="screen" id="electionScreen">
        <div class="container">
            <div class="screen-header">
                <h2>ğŸ‘‘ EleiÃ§Ã£o do CEO</h2>
                <p class="screen-description">Hora de escolher quem serÃ¡ o CEO da empresa! Vote no membro que vocÃª considera mais adequado para liderar.</p>
            </div>

            <div class="candidates-section" id="candidatesSection">
                <h3>ğŸ—³ï¸ Candidatos</h3>
                <div class="candidates-grid" id="candidatesGrid">
                    <!-- Candidatos serÃ£o listados aqui -->
                </div>

                <div class="voting-actions">
                    <button class="btn btn--primary btn--large hidden" id="submitCeoVoteBtn">
                        âœ… Confirmar Voto para CEO
                    </button>
                </div>
            </div>

            <div class="election-results hidden" id="electionResults">
                <h3>ğŸ“Š Resultado da EleiÃ§Ã£o</h3>
                <div class="ceo-elected" id="ceoElected">
                    <!-- CEO eleito serÃ¡ mostrado aqui -->
                </div>

                <div class="satisfaction-rating" id="satisfactionRating">
                    <h4>â­ Avalie sua satisfaÃ§Ã£o com o resultado</h4>
                    <div class="rating-stars" id="ratingStars">
                        <button class="star" data-rating="1">â­</button>
                        <button class="star" data-rating="2">â­</button>
                        <button class="star" data-rating="3">â­</button>
                        <button class="star" data-rating="4">â­</button>
                        <button class="star" data-rating="5">â­</button>
                    </div>
                    <button class="btn btn--outline" id="submitSatisfactionBtn">ğŸ“ Enviar AvaliaÃ§Ã£o</button>
                </div>
            </div>

            <div class="ceo-actions hidden" id="ceoActions">
                <div class="ceo-panel">
                    <h3>ğŸ‘‘ Painel do CEO</h3>
                    <p>Como CEO, vocÃª pode ver a satisfaÃ§Ã£o mÃ©dia da equipe com sua eleiÃ§Ã£o:</p>
                    <div class="satisfaction-display" id="satisfactionDisplay">
                        <div class="satisfaction-score">SatisfaÃ§Ã£o da Equipe: <span id="satisfactionScore">â³ Aguardando avaliaÃ§Ãµes...</span></div>
                    </div>
                    <button class="btn btn--success btn--large" id="continueToPositionsBtn">
                        ğŸ“‹ Definir Cargos da Equipe
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- DefiniÃ§Ã£o de Cargos -->
    <div class="screen" id="positionsScreen">
        <div class="container">
            <div class="screen-header">
                <h2>ğŸ“‹ DefiniÃ§Ã£o de Cargos</h2>
                <p class="screen-description">CEO, agora vocÃª deve definir os cargos executivos para cada membro da equipe!</p>
            </div>

            <div class="positions-assignment" id="positionsAssignment">
                <div class="available-positions">
                    <h3>ğŸ¯ Cargos DisponÃ­veis</h3>
                    <div class="positions-list" id="positionsList">
                        <!-- Cargos serÃ£o listados aqui -->
                    </div>
                </div>

                <div class="team-assignment">
                    <h3>ğŸ‘¥ Atribuir Cargos</h3>
                    <div class="assignment-grid" id="assignmentGrid">
                        <!-- Grid de atribuiÃ§Ãµes serÃ¡ mostrado aqui -->
                    </div>

                    <button class="btn btn--primary btn--large" id="confirmPositionsBtn">
                        âœ… Confirmar Cargos
                    </button>
                </div>
            </div>

            <div class="positions-results hidden" id="positionsResults">
                <h3>ğŸ“Š Organograma Final</h3>
                <div class="org-chart" id="orgChart">
                    <!-- Organograma serÃ¡ mostrado aqui -->
                </div>

                <div class="positions-satisfaction" id="positionsSatisfaction">
                    <h4>â­ Avalie as escolhas do CEO</h4>
                    <div class="rating-stars" id="positionsRatingStars">
                        <button class="star" data-rating="1">â­</button>
                        <button class="star" data-rating="2">â­</button>
                        <button class="star" data-rating="3">â­</button>
                        <button class="star" data-rating="4">â­</button>
                        <button class="star" data-rating="5">â­</button>
                    </div>
                    <button class="btn btn--outline" id="submitPositionsSatisfactionBtn">ğŸ“ Enviar AvaliaÃ§Ã£o</button>
                </div>
            </div>

            <div class="ceo-positions-actions hidden" id="ceoPositionsActions">
                <div class="satisfaction-display" id="positionsSatisfactionDisplay">
                    <div class="satisfaction-score">SatisfaÃ§Ã£o com Cargos: <span id="positionsSatisfactionScore">â³ Aguardando...</span></div>
                </div>
                <button class="btn btn--success btn--large" id="continueToHiringBtn">
                    ğŸ‘¥ Processo de ContrataÃ§Ã£o
                </button>
            </div>
        </div>
    </div>

    <!-- ContrataÃ§Ã£o -->
    <div class="screen" id="hiringScreen">
        <div class="container">
            <div class="screen-header">
                <h2>ğŸ‘¥ Processo de ContrataÃ§Ã£o</h2>
                <p class="screen-description">Cada membro deve indicar as contrataÃ§Ãµes necessÃ¡rias para sua Ã¡rea. O CEO tomarÃ¡ as decisÃµes finais!</p>
            </div>

            <div class="hiring-phase" id="hiringPhase">
                <div class="member-recommendations" id="memberRecommendations">
                    <h3>ğŸ’¡ Suas RecomendaÃ§Ãµes de ContrataÃ§Ã£o</h3>
                    <p>Com base no seu cargo, selecione as contrataÃ§Ãµes que considera essenciais:</p>

                    <div class="hiring-categories" id="hiringCategories">
                        <!-- Categorias de contrataÃ§Ã£o serÃ£o mostradas aqui -->
                    </div>

                    <button class="btn btn--primary" id="submitRecommendationsBtn">
                        ğŸ“¤ Enviar RecomendaÃ§Ãµes
                    </button>
                </div>
            </div>

            <div class="ceo-hiring-decisions hidden" id="ceoHiringDecisions">
                <h3>ğŸ‘‘ DecisÃµes Finais do CEO</h3>
                <div class="budget-display">
                    <h4>ğŸ’° OrÃ§amento DisponÃ­vel</h4>
                    <div class="budget-amount" id="budgetAmount">R$ 500.000</div>
                </div>

                <div class="recommendations-summary" id="recommendationsSummary">
                    <h4>ğŸ“‹ RecomendaÃ§Ãµes da Equipe</h4>
                    <div class="recommendations-list" id="recommendationsList">
                        <!-- RecomendaÃ§Ãµes serÃ£o listadas aqui -->
                    </div>
                </div>

                <div class="final-decisions" id="finalDecisions">
                    <h4>âœ… Suas DecisÃµes Finais</h4>
                    <div class="decisions-grid" id="decisionsGrid">
                        <!-- Grid de decisÃµes serÃ¡ mostrado aqui -->
                    </div>

                    <div class="budget-summary">
                        <div class="total-cost">Total a ser gasto: R$ <span id="totalCost">0</span></div>
                        <div class="remaining-budget">OrÃ§amento restante: R$ <span id="remainingBudget">500.000</span></div>
                    </div>

                    <button class="btn btn--success btn--large" id="confirmHiringBtn">
                        ğŸ¯ Confirmar ContrataÃ§Ãµes
                    </button>
                </div>
            </div>

            <div class="hiring-results hidden" id="hiringResults">
                <h3>ğŸ“Š Organograma Final da Empresa</h3>
                <div class="final-org-chart" id="finalOrgChart">
                    <!-- Organograma final serÃ¡ mostrado aqui -->
                </div>

                <div class="hiring-satisfaction" id="hiringSatisfaction">
                    <h4>â­ Avalie as decisÃµes de contrataÃ§Ã£o</h4>
                    <div class="rating-stars" id="hiringRatingStars">
                        <button class="star" data-rating="1">â­</button>
                        <button class="star" data-rating="2">â­</button>
                        <button class="star" data-rating="3">â­</button>
                        <button class="star" data-rating="4">â­</button>
                        <button class="star" data-rating="5">â­</button>
                    </div>
                    <button class="btn btn--outline" id="submitHiringSatisfactionBtn">ğŸ“ Enviar AvaliaÃ§Ã£o</button>
                </div>
            </div>

            <div class="ceo-hiring-actions hidden" id="ceoHiringActions">
                <div class="satisfaction-display" id="hiringSatisfactionDisplay">
                    <div class="satisfaction-score">SatisfaÃ§Ã£o Final: <span id="hiringSatisfactionScore">â³ Aguardando...</span></div>
                </div>
                <button class="btn btn--success btn--large" id="viewFinalResultsBtn">
                    ğŸ† Ver Resultados Finais
                </button>
            </div>
        </div>
    </div>

    <!-- Resultados Finais -->
    <div class="screen" id="resultsScreen">
        <div class="container">
            <div class="screen-header">
                <h2>ğŸ† Resultados Finais - Ato 1</h2>
                <p class="screen-description">Veja como sua equipe se saiu na primeira fase da simulaÃ§Ã£o empresarial!</p>
            </div>

            <div class="final-results" id="finalResults">
                <div class="team-summary" id="teamSummary">
                    <h3>ğŸ“Š Resumo da Equipe</h3>
                    <!-- Resumo serÃ¡ mostrado aqui -->
                </div>

                <div class="scoring-breakdown" id="scoringBreakdown">
                    <h3>ğŸ“ˆ Breakdown de PontuaÃ§Ã£o</h3>
                    <!-- Breakdown serÃ¡ mostrado aqui -->
                </div>

                <div class="team-ranking" id="teamRanking">
                    <h3>ğŸ… Ranking Geral</h3>
                    <!-- Ranking serÃ¡ mostrado aqui -->
                </div>

                <div class="next-phase" id="nextPhase">
                    <h3>ğŸš€ PrÃ³ximos Passos</h3>
                    <p>ParabÃ©ns por completar o Ato 1 do EmpresaTec! Aguardem o prÃ³ximo ato da simulaÃ§Ã£o.</p>
                    <button class="btn btn--outline btn--large" id="restartBtn">
                        ğŸ”„ Jogar Novamente
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Painel do Professor -->
    <div class="screen" id="teacherScreen">
        <div class="container">
            <div class="screen-header">
                <h2>ğŸ‘©â€ğŸ« Painel do Professor</h2>
                <p class="screen-description">Monitore todas as equipes e controle o andamento da simulaÃ§Ã£o.</p>
            </div>

            <div class="teacher-controls">
                <div class="control-buttons">
                    <button class="btn btn--primary" id="toggleScoresBtn">
                        ğŸ‘ï¸ Mostrar/Ocultar PontuaÃ§Ãµes
                    </button>
                    <button class="btn btn--danger" id="resetGameBtn">
                        ğŸ—‘ï¸ Resetar SimulaÃ§Ã£o
                    </button>
                    <button class="btn btn--outline" id="exportDataBtn">
                        ğŸ“Š Exportar Dados
                    </button>
                </div>

                <div class="password-section">
                    <div class="form-group">
                        <label>Senha de Administrador:</label>
                        <input type="password" id="adminPassword" class="form-control" placeholder="Digite a senha">
                    </div>
                </div>
            </div>

            <div class="teams-monitor" id="teamsMonitor">
                <h3>ğŸ“‹ Monitoramento de Equipes</h3>
                <div class="teams-grid" id="teamsGrid">
                    <!-- Grid de equipes serÃ¡ mostrado aqui -->
                </div>
            </div>

            <button class="btn btn--outline" id="backToGameBtn">
                â¬…ï¸ Voltar ao Jogo
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>

    <!-- Firebase Configuration -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';
        import { getFirestore, doc, setDoc, getDoc, collection, addDoc, updateDoc, onSnapshot, query, where, orderBy, getDocs } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDUBDKmRSc3BRDtez_g4Cd8VRYOGq6f7JQ",
            authDomain: "simulacao-empresa.firebaseapp.com",
            projectId: "simulacao-empresa",
            storageBucket: "simulacao-empresa.firebasestorage.app",
            messagingSenderId: "454064270255",
            appId: "1:454064270255:web:f3d65cc4fc6018e1715d5a",
            measurementId: "G-029B5VNF4M"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Make Firebase available globally
        window.firebaseAuth = auth;
        window.firebaseDB = db;
        window.firebaseUtils = {
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            onAuthStateChanged,
            signOut,
            doc,
            setDoc,
            getDoc,
            collection,
            addDoc,
            updateDoc,
            onSnapshot,
            query,
            where,
            orderBy,
            getDocs
        };

        // Initialize logout system
        function initLogoutSystem() {
            const logoutBtn = document.getElementById('logoutBtn');
            const logoutContainer = document.getElementById('logoutContainer');
            const userEmail = document.getElementById('userEmail');

            // Auth state observer
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    logoutContainer.classList.remove('hidden');
                    userEmail.textContent = user.email;
                    console.log('User logged in:', user.email);
                } else {
                    logoutContainer.classList.add('hidden');
                    console.log('User logged out');
                }
            });

            // Logout functionality
            logoutBtn.addEventListener('click', async () => {
                if (confirm('Deseja realmente fazer logout?')) {
                    try {
                        logoutBtn.disabled = true;
                        logoutBtn.innerHTML = '<span>Saindo...</span>';

                        await signOut(auth);
                        localStorage.clear();
                        sessionStorage.clear();

                        alert('Logout realizado com sucesso!');
                        window.location.reload();
                    } catch (error) {
                        console.error('Logout error:', error);
                        alert('Erro ao fazer logout: ' + error.message);
                        logoutBtn.disabled = false;
                        logoutBtn.innerHTML = `
                            <svg class="logout-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16,17 21,12 16,7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            Sair
                        `;
                    }
                }
            });
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            initLogoutSystem();
            console.log('EmpresaTec - Firebase initialized');
        });
    </script>
</body>
</html>
