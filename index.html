<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmpresaTec - Sistema de SimulaÃ§Ã£o Empresarial</title>
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <div id="loadingText" class="loading-text">Carregando...</div>
    </div>

    <!-- Alert System -->
    <div id="alertSystem" class="alert-system hidden">
        <div id="alertContent" class="alert-content">
            <div class="alert-header">
                <span id="alertIcon" class="alert-icon">â„¹ï¸</span>
                <button id="alertClose" class="alert-close">&times;</button>
            </div>
            <div id="alertMessage" class="alert-message">Mensagem do sistema</div>
        </div>
    </div>

    <!-- User Bar -->
    <div id="userBar" class="user-bar hidden">
        <div class="user-info">
            <span id="currentUser" class="user-name">ğŸ‘¤ UsuÃ¡rio</span>
            <span id="currentTeam" class="team-name">ğŸ¢ Empresa</span>
            <span id="currentScore" class="score">ğŸ† 0 pontos</span>
        </div>
        <button id="logoutBtn" class="btn btn--sm btn--outline">Sair</button>
    </div>

    <!-- Progress Bar -->
    <div id="progressBar" class="progress-bar hidden">
        <div class="progress-info">
            <span id="progressLabel" class="progress-label">EmpresaTec</span>
            <span id="progressPhase" class="progress-phase">Fase 1 de 5</span>
        </div>
        <div class="progress-track">
            <div id="progressFill" class="progress-fill" style="width: 0%"></div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">

        <!-- LOGIN SCREEN -->
        <div id="loginScreen" class="screen active">
            <div class="login-container">
                <div class="brand">
                    <div class="brand-icon">ğŸ¢</div>
                    <h1 class="brand-title">EmpresaTec</h1>
                    <p class="brand-subtitle">Sistema de SimulaÃ§Ã£o Empresarial</p>
                </div>

                <form id="loginForm" class="login-form">
                    <h2>ğŸš€ Entre no Sistema</h2>
                    <div class="form-group">
                        <label for="loginEmail">ğŸ“§ Email</label>
                        <input type="email" id="loginEmail" name="email" placeholder="seu.email@exemplo.com" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">ğŸ” Senha</label>
                        <input type="password" id="loginPassword" name="password" placeholder="Digite sua senha" required>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full">ğŸš€ Entrar no EmpresaTec</button>
                    <div class="login-info">
                        <small>ğŸ’¡ Digite qualquer email e senha - a conta serÃ¡ criada automaticamente!</small>
                    </div>
                </form>

                <div class="teacher-access">
                    <button id="teacherAccessBtn" class="btn btn--outline">ğŸ‘©â€ğŸ« Acesso Professor</button>
                </div>

                <div class="system-info">
                    <div class="connection-status" id="connectionStatus">
                        <span class="status-indicator" id="statusIndicator">ğŸ”´</span>
                        <span class="status-text" id="statusText">Verificando conexÃ£o...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- TEACHER SCREEN -->
        <div id="teacherScreen" class="screen">
            <div class="teacher-container">
                <!-- Teacher Login -->
                <div id="teacherLogin" class="teacher-login">
                    <div class="teacher-header">
                        <h2>ğŸ‘©â€ğŸ« Painel do Professor</h2>
                        <p>Digite a senha para acessar o sistema administrativo</p>
                    </div>

                    <form id="teacherPasswordForm" class="teacher-form">
                        <div class="form-group">
                            <label for="teacherPassword">ğŸ” Senha do Professor</label>
                            <input type="password" id="teacherPassword" placeholder="Digite a senha" required>
                        </div>
                        <button type="submit" class="btn btn--primary">ğŸ”“ Acessar Painel</button>
                    </form>

                    <button id="backToLoginBtn" class="btn btn--outline btn--sm">â† Voltar ao Login</button>
                </div>

                <!-- Teacher Dashboard -->
                <div id="teacherDashboard" class="teacher-dashboard hidden">
                    <header class="dashboard-header">
                        <h1>ğŸ“Š Dashboard do Professor</h1>
                        <div class="dashboard-actions">
                            <button id="backToSimulation" class="btn btn--outline btn--sm">ğŸ® Voltar Ã  SimulaÃ§Ã£o</button>
                            <button id="teacherLogout" class="btn btn--danger btn--sm">ğŸšª Sair</button>
                        </div>
                    </header>

                    <!-- Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ¢</div>
                            <div class="stat-content">
                                <div class="stat-number" id="totalCompanies">0</div>
                                <div class="stat-label">Empresas Criadas</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ‘¥</div>
                            <div class="stat-content">
                                <div class="stat-number" id="totalStudents">0</div>
                                <div class="stat-label">Estudantes Participando</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ¯</div>
                            <div class="stat-content">
                                <div class="stat-number" id="currentAct">1</div>
                                <div class="stat-label">Ato Atual</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">âœ…</div>
                            <div class="stat-content">
                                <div class="stat-number" id="completedTeams">0</div>
                                <div class="stat-label">Equipes ConcluÃ­das</div>
                            </div>
                        </div>
                    </div>

                    <!-- Teacher Controls -->
                    <div class="teacher-controls">
                        <h3>ğŸ® Controles do Jogo</h3>
                        <div class="controls-grid">
                            <button id="approveAct1" class="btn btn--success">âœ… Aprovar Ato 1</button>
                            <button id="approveAct2" class="btn btn--success" disabled>ğŸ”’ Aprovar Ato 2</button>
                            <button id="approveAct3" class="btn btn--success" disabled>ğŸ”’ Aprovar Ato 3</button>
                            <button id="approveAct4" class="btn btn--success" disabled>ğŸ”’ Aprovar Ato 4</button>
                            <button id="approveAct5" class="btn btn--success" disabled>ğŸ”’ Aprovar Ato 5</button>
                        </div>
                    </div>

                    <!-- Data Management -->
                    <div class="data-management">
                        <h3>ğŸ“Š GestÃ£o de Dados</h3>
                        <div class="data-actions">
                            <button id="showRanking" class="btn btn--info">ğŸ† Ver Ranking</button>
                            <button id="exportData" class="btn btn--info">ğŸ“¤ Exportar Dados</button>
                            <button id="generateReport" class="btn btn--info">ğŸ“‹ Gerar RelatÃ³rio</button>
                            <button id="backupData" class="btn btn--warning">ğŸ’¾ Backup</button>
                            <button id="resetAllData" class="btn btn--danger">ğŸ—‘ï¸ Reset Geral</button>
                        </div>
                    </div>

                    <!-- Teams Monitor -->
                    <div class="teams-monitor">
                        <h3>ğŸ‘¥ Monitor de Equipes</h3>
                        <div id="teamsMonitor" class="teams-list">
                            <div class="loading-message">ğŸ“Š Carregando equipes...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TEAM SCREEN -->
        <div id="teamScreen" class="screen">
            <div class="team-container">
                <div class="team-header">
                    <h2>ğŸ¢ GestÃ£o de Empresa</h2>
                    <p>Crie uma nova empresa ou entre em uma existente</p>
                </div>

                <div class="team-options">
                    <!-- Create Team -->
                    <div class="team-option">
                        <h3>ğŸ—ï¸ Fundar Nova Empresa</h3>
                        <form id="createTeamForm" class="team-form">
                            <div class="form-group">
                                <label for="companyName">ğŸ¢ Nome da Empresa</label>
                                <input type="text" id="companyName" placeholder="Ex: TechStart InovaÃ§Ã£o" required>
                            </div>
                            <button type="submit" class="btn btn--primary">ğŸ—ï¸ Fundar Empresa</button>
                        </form>
                    </div>

                    <!-- Join Team -->
                    <div class="team-option">
                        <h3>ğŸ¤ Entrar em Empresa</h3>
                        <form id="joinTeamForm" class="team-form">
                            <div class="form-group">
                                <label for="teamCode">ğŸ¯ CÃ³digo da Empresa</label>
                                <input type="text" id="teamCode" placeholder="Ex: ABC123" maxlength="6" required>
                            </div>
                            <button type="submit" class="btn btn--secondary">ğŸ¤ Entrar na Empresa</button>
                        </form>
                    </div>
                </div>

                <!-- Team Status -->
                <div id="teamStatus" class="team-status hidden">
                    <h3 id="teamName" class="team-name">Nome da Empresa</h3>
                    <div class="team-code">
                        <span>ğŸ“‹ CÃ³digo: </span>
                        <span id="teamCodeDisplay" class="code-display">ABC123</span>
                        <button id="copyCodeBtn" class="btn btn--xs btn--outline">ğŸ“‹ Copiar</button>
                    </div>

                    <div class="members-section">
                        <h4>ğŸ‘¥ Membros da Equipe</h4>
                        <div id="membersList" class="members-list">
                            <!-- Membros serÃ£o inseridos aqui -->
                        </div>
                    </div>

                    <div id="teamWaiting" class="team-waiting">
                        <p>â³ Aguardando mais membros...</p>
                    </div>

                    <div id="startGameSection" class="start-game hidden">
                        <button id="startAct1Btn" class="btn btn--primary btn--large">âœ¨ Iniciar Ato 1</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACT 1 SCREEN -->
        <div id="act1Screen" class="screen">
            <div class="act-container">
                <div class="act-header">
                    <h1>ğŸ—ï¸ Ato 1: FundaÃ§Ã£o da Empresa</h1>
                    <p>Fase <span id="act1CurrentPhase">1</span> de 5</p>
                </div>

                <!-- Phase 1: Profile Questionnaire -->
                <div id="phase1Container" class="phase-container active">
                    <div class="phase-content">
                        <h2>ğŸ§  Descobrindo seu Perfil Profissional</h2>
                        <p>Responda Ã s perguntas para descobrir suas caracterÃ­sticas empresariais</p>

                        <div class="questionnaire-progress">
                            <span>Pergunta <span id="currentQ">1</span> de <span id="totalQ">10</span></span>
                            <div class="progress-mini">
                                <div id="progressMini" class="progress-mini-fill"></div>
                            </div>
                        </div>

                        <div class="question-container">
                            <h3 id="questionText" class="question-text">Carregando pergunta...</h3>
                            <div id="questionOptions" class="question-options">
                                <!-- OpÃ§Ãµes serÃ£o inseridas aqui -->
                            </div>
                        </div>

                        <div class="question-navigation">
                            <button id="prevBtn" class="btn btn--outline" disabled>â† Anterior</button>
                            <button id="nextBtn" class="btn btn--primary" disabled>PrÃ³xima â†’</button>
                            <button id="finishProfileBtn" class="btn btn--success hidden" disabled>âœ… Finalizar Perfil</button>
                        </div>

                        <div id="profileResult" class="profile-result hidden">
                            <h3>ğŸ¯ Seu Perfil Empresarial</h3>
                            <div class="profile-card">
                                <div id="profileIcon" class="profile-icon">ğŸ¯</div>
                                <h4 id="profileName" class="profile-name">Perfil</h4>
                                <p id="profileDescription" class="profile-description">DescriÃ§Ã£o do perfil</p>
                                <div class="profile-strengths">
                                    <h5>ğŸ’ª Pontos Fortes:</h5>
                                    <div id="profileStrengths" class="strengths-list">
                                        <!-- ForÃ§as serÃ£o inseridas aqui -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="waitingOthers" class="waiting-others">
                            <p id="profileProgress">Aguardando outros membros completarem o perfil...</p>
                        </div>

                        <div class="phase-actions">
                            <button id="continueToPhase2" class="btn btn--primary btn--large hidden">ğŸ­ Continuar para Fase 2</button>
                        </div>
                    </div>
                </div>

                <!-- Phase 2: Segment Selection -->
                <div id="phase2Container" class="phase-container">
                    <div class="phase-content">
                        <h2>ğŸ­ SeleÃ§Ã£o do Segmento Empresarial</h2>
                        <p>Escolha o setor tecnolÃ³gico da sua empresa</p>
                        <div class="phase-placeholder">
                            <div class="placeholder-icon">ğŸš§</div>
                            <h3>Fase em Desenvolvimento</h3>
                            <p>Esta fase serÃ¡ implementada em breve</p>
                        </div>
                        <div class="phase-actions">
                            <button id="continueToPhase3" class="btn btn--primary btn--large">ğŸ‘‘ Continuar para Fase 3</button>
                        </div>
                    </div>
                </div>

                <!-- Phase 3: CEO Election -->
                <div id="phase3Container" class="phase-container">
                    <div class="phase-content">
                        <h2>ğŸ‘‘ EleiÃ§Ã£o do CEO</h2>
                        <p>Vote democraticamente no lÃ­der da empresa</p>
                        <div class="phase-placeholder">
                            <div class="placeholder-icon">ğŸš§</div>
                            <h3>Fase em Desenvolvimento</h3>
                            <p>Esta fase serÃ¡ implementada em breve</p>
                        </div>
                        <div class="phase-actions">
                            <button id="continueToPhase4" class="btn btn--primary btn--large">ğŸ¢ Continuar para Fase 4</button>
                        </div>
                    </div>
                </div>

                <!-- Phase 4: Location Selection -->
                <div id="phase4Container" class="phase-container">
                    <div class="phase-content">
                        <h2>ğŸ¢ SeleÃ§Ã£o da Sede</h2>
                        <p>Escolha a localizaÃ§Ã£o da sua empresa</p>
                        <div class="phase-placeholder">
                            <div class="placeholder-icon">ğŸš§</div>
                            <h3>Fase em Desenvolvimento</h3>
                            <p>Esta fase serÃ¡ implementada em breve</p>
                        </div>
                        <div class="phase-actions">
                            <button id="continueToPhase5" class="btn btn--primary btn--large">ğŸ’» Continuar para Fase 5</button>
                        </div>
                    </div>
                </div>

                <!-- Phase 5: Equipment Selection -->
                <div id="phase5Container" class="phase-container">
                    <div class="phase-content">
                        <h2>ğŸ’» SeleÃ§Ã£o de Equipamentos</h2>
                        <p>Invista o orÃ§amento em equipamentos essenciais</p>
                        <div class="budget-info">
                            <span class="budget-label">ğŸ’° OrÃ§amento DisponÃ­vel:</span>
                            <span id="act1Budget" class="budget-value">R$ 500.000</span>
                        </div>
                        <div class="phase-placeholder">
                            <div class="placeholder-icon">ğŸš§</div>
                            <h3>Fase em Desenvolvimento</h3>
                            <p>Esta fase serÃ¡ implementada em breve</p>
                        </div>
                        <div class="phase-actions">
                            <button id="finishAct1" class="btn btn--success btn--large">ğŸ‰ Finalizar Ato 1</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RANKING SCREEN -->
        <div id="rankingScreen" class="screen">
            <div class="ranking-container">
                <div class="ranking-header">
                    <h1>ğŸ† Ranking das Empresas</h1>
                    <button id="closeRanking" class="btn btn--outline">â† Voltar</button>
                </div>

                <div id="rankingSummary" class="ranking-summary">
                    <!-- EstatÃ­sticas gerais -->
                </div>

                <div id="rankingTable" class="ranking-table">
                    <!-- Tabela de ranking -->
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase Configuration -->
    <script>
        // ConfiguraÃ§Ã£o do Firebase
        const firebaseConfig = {
            // SUBSTITUA pelas suas configuraÃ§Ãµes do Firebase
            apiKey: "sua-api-key-aqui",
            authDomain: "empresatec-projeto.firebaseapp.com",
            projectId: "empresatec-projeto",
            storageBucket: "empresatec-projeto.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcdef123456"
        };

        // Inicializar Firebase (modo compatibilidade)
        if (typeof firebase !== 'undefined') {
            try {
                firebase.initializeApp(firebaseConfig);

                // Disponibilizar serviÃ§os globalmente
                window.firebase = {
                    app: firebase.app(),
                    db: firebase.firestore(),
                    auth: firebase.auth(),

                    // MÃ©todos Firestore
                    doc: firebase.firestore.doc,
                    collection: firebase.firestore.collection,
                    setDoc: firebase.firestore.setDoc,
                    getDoc: firebase.firestore.getDoc,
                    getDocs: firebase.firestore.getDocs,
                    deleteDoc: firebase.firestore.deleteDoc,
                    writeBatch: firebase.firestore.writeBatch,

                    // MÃ©todos Auth
                    signInWithEmailAndPassword: firebase.auth.signInWithEmailAndPassword,
                    createUserWithEmailAndPassword: firebase.auth.createUserWithEmailAndPassword,
                    signOut: firebase.auth.signOut
                };

                console.log('ğŸ”¥ Firebase inicializado com sucesso');
            } catch (error) {
                console.warn('âš ï¸ Erro ao inicializar Firebase:', error.message);
                console.warn('ğŸ’¾ Sistema funcionarÃ¡ apenas com localStorage');
            }
        } else {
            console.warn('âš ï¸ Firebase SDK nÃ£o carregado');
            console.warn('ğŸ’¾ Sistema funcionarÃ¡ apenas com localStorage');
        }
    </script>

    <!-- Main Application Script -->
    <script src="app.js"></script>
</body>
</html>
